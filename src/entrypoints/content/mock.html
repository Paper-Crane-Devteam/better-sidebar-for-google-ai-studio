<div _ngcontent-ng-c2470520458="" tabindex="-1" cdkmonitorsubtreefocus="" class="chat-turn-container code-block-aligner model render ng-star-inserted"><div _ngcontent-ng-c2470520458="" class="actions-container"><div _ngcontent-ng-c2470520458="" class="actions hover-or-edit"><button _ngcontent-ng-c2470520458="" ms-button="" variant="icon-borderless" mattooltipposition="below" class="mat-mdc-tooltip-trigger toggle-edit-button ms-button-borderless ms-button-icon ng-star-inserted" aria-label="Edit" jslog="269715;track:generic_click,impression;mutable:true" aria-disabled="false"><span _ngcontent-ng-c2470520458="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">edit</span></button><button _ngcontent-ng-c2470520458="" ms-button="" variant="icon-borderless" name="rerun-button" mattooltip="Rerun" aria-label="Rerun this turn" mattooltipposition="below" class="mat-mdc-tooltip-trigger rerun-button ms-button-borderless ms-button-icon ng-star-inserted" jslog="228331;track:generic_click,impression" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-43" cdk-describedby-host="ng-1"><svg _ngcontent-ng-c2470520458="" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" class="ng-star-inserted"><g _ngcontent-ng-c2470520458="" clip-path="url(#clip0_10012_165935)"><path _ngcontent-ng-c2470520458="" d="M10 17.5833C10 16.5278 9.79861 15.5417 9.39583 14.625C9.00694 13.7083 8.46528 12.9097 7.77083 12.2292C7.09028 11.5347 6.29167 10.9931 5.375 10.6042C4.45833 10.2014 3.47222 10 2.41667 10C3.47222 10 4.45833 9.80556 5.375 9.41667C6.29167 9.01389 7.09028 8.47222 7.77083 7.79167C8.46528 7.09722 9.00694 6.29167 9.39583 5.375C9.79861 4.44444 10 3.45833 10 2.41667C10 3.45833 10.1944 4.44444 10.5833 5.375C10.9861 6.29167 11.5278 7.09722 12.2083 7.79167C12.9028 8.47222 13.7083 9.01389 14.625 9.41667C15.5556 9.80556 16.5417 10 17.5833 10C16.5417 10 15.5556 10.2014 14.625 10.6042C13.7083 10.9931 12.9028 11.5347 12.2083 12.2292C11.5278 12.9097 10.9861 13.7083 10.5833 14.625C10.1944 15.5417 10 16.5278 10 17.5833Z" fill="url(#paint0_linear_10012_165935)"></path></g><defs _ngcontent-ng-c2470520458=""><linearGradient _ngcontent-ng-c2470520458="" id="paint0_linear_10012_165935" x1="10" y1="0" x2="10" y2="20" gradientUnits="userSpaceOnUse"><stop _ngcontent-ng-c2470520458="" stop-color="#87A9FF"></stop><stop _ngcontent-ng-c2470520458="" offset="0.44" stop-color="#A7B8EE"></stop><stop _ngcontent-ng-c2470520458="" offset="0.88" stop-color="#F1DCC7"></stop></linearGradient><clipPath _ngcontent-ng-c2470520458="" id="clip0_10012_165935"><rect _ngcontent-ng-c2470520458="" width="20" height="20" fill="white"></rect></clipPath></defs></svg></button><ms-chat-turn-options _ngcontent-ng-c2470520458="" mattooltip="More options" mattooltipposition="below" class="mat-mdc-tooltip-trigger" aria-describedby="cdk-describedby-message-ng-1-42" cdk-describedby-host="ng-1"><div><button ms-button="" variant="icon-borderless" iconname="more_vert" aria-label="Open options" class="mat-mdc-menu-trigger ms-button-borderless ms-button-icon" jslog="228332;track:generic_click,impression" aria-disabled="false" aria-haspopup="menu" aria-expanded="false"><span class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">more_vert</span></button><mat-menu></mat-menu></div></ms-chat-turn-options></div></div><div _ngcontent-ng-c2470520458="" class="virtual-scroll-container model-prompt-container" data-turn-role="Model"><div _ngcontent-ng-c2470520458="" style="height: 2597px;"></div><div _ngcontent-ng-c2470520458="" msheightchanged="" class="turn-content"><ms-prompt-chunk _ngcontent-ng-c2470520458="" _nghost-ng-c1853436541="" class="text-chunk ng-star-inserted" id="FB985AE8-E1F2-4AB0-83FE-FDFFD0761D56"><ms-text-chunk _ngcontent-ng-c1853436541="" _nghost-ng-c242106171="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c242106171="" class="cmark-node v3-font-body ng-star-inserted" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">这是一个非常敏锐的观察。我们分两步来解答你的疑问：关于 Header 的问题，以及关于解析这种“奇葩”数据格式的问题。</span></ms-cmark-node></p><h3 _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">一、 为什么请求里没有 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">Transfer-Encoding: chunked</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">？</span></ms-cmark-node></h3><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">原因有两点：</span></ms-cmark-node></strong></ms-cmark-node></p><ol _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">你看反了方向</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span></ms-cmark-node></p><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">curl</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 命令展示的是 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">请求（Request）</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">，即你发给谷歌服务器的数据。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">Transfer-Encoding: chunked</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 是 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">响应（Response）</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> Header。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">当你执行这条 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">curl</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 命令后，</span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">服务器返回给你的 Response Headers</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 里才会有 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">Transfer-Encoding: chunked</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">（或者是 HTTP/2 的流式帧）。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">目前的请求头里只有 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">content-type: application/json+protobuf</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">，这告诉服务器：“我发给你的是这种格式的数据”。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ul></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">HTTP/2 和 HTTP/3 的机制不同</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span></ms-cmark-node></p><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">Google 的服务通常使用 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">HTTP/2</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 或 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">HTTP/3 (QUIC)</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">在 HTTP/1.1 中，我们需要显式的 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">Transfer-Encoding: chunked</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 来告诉客户端“数据还没发完”。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">在 HTTP/2+ 中，流式传输是协议层面的核心功能（Framing），不再依赖 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">chunked</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 这个具体的 Header 来实现分块。数据天然就是通过一个个 Frame（帧）流式传输的。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ul></ms-cmark-node></li></ms-cmark-node></ol><hr _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><h3 _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">二、 解析这种 Proto 数据有库吗？</span></ms-cmark-node></h3><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">简短回答：没有通用的“魔法库”能直接解析出带字段名的对象。</span></ms-cmark-node></strong></ms-cmark-node></p><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">详细解释：</span></ms-cmark-node></strong></ms-cmark-node></p><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">你看到的这种格式（我们称为 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">Array-based JSON Protobuf</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 或 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">JSPB</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">），是 Google 内部非常喜欢用的一种序列化方式。</span></ms-cmark-node></p><h4 _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">1. 为什么不能直接用通用的 Protobuf 库解析？</span></ms-cmark-node></h4><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">标准的 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">protobuf.js</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 或 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">google-protobuf</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 库，通常处理的是 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">二进制流</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 或者 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">标准的 Key-Value JSON</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">。</span></ms-cmark-node></p><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">要解析你看到的这个 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">[null, "abc", [1, 2]]</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 数组，你必须拥有原始的 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">.proto</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 定义文件</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">。</span></ms-cmark-node></p><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">标准 JSON</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">{ "text": "你好", "id": 123 }</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> —— 即使没有定义文件，我也知道字段叫 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">text</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">你抓到的数组 JSON</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">["你好", 123]</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> —— 如果没有定义文件，根本不知道第 0 个元素是 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">text</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 还是 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">name</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">，第 1 个元素是 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">id</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 还是 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">timestamp</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ul><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">这个映射关系（Schema）保存在 Google 的服务器代码里，并没有公开。</span></ms-cmark-node></strong></ms-cmark-node></p><h4 _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">2. 怎么解析？（三种流派）</span></ms-cmark-node></h4><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">如果你非要解析这个接口的数据，通常有以下几种方法：</span></ms-cmark-node></p><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">方案 A：手动硬编码（最常用，但最脆弱）</span></ms-cmark-node></strong><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">这是写爬虫或插件最常用的手段。你通过肉眼观察，发现：“哦，回复的内容总是在 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">response[1][0][2]</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 这个位置”。</span></ms-cmark-node></p><ms-code-block _ngcontent-ng-c4139270029="" _nghost-ng-c617240007="" class="ng-star-inserted"><div _ngcontent-ng-c617240007="" class="container"><mat-expansion-panel _ngcontent-ng-c617240007="" class="mat-expansion-panel sticky-header mat-expanded mat-expansion-panel-animations-enabled"><mat-expansion-panel-header _ngcontent-ng-c617240007="" role="button" class="mat-expansion-panel-header mat-focus-indicator sticky mat-expanded" id="mat-expansion-panel-header-7" tabindex="0" aria-controls="cdk-accordion-child-7" aria-expanded="true" aria-disabled="false"><span class="mat-content"><mat-panel-title _ngcontent-ng-c617240007="" class="mat-expansion-panel-header-title"><span _ngcontent-ng-c617240007="" aria-hidden="true" class="material-symbols-outlined notranslate title-icon ng-star-inserted"> code </span><span _ngcontent-ng-c617240007="" class="ng-star-inserted">JavaScript</span></mat-panel-title><div _ngcontent-ng-c617240007="" class="actions-container ng-star-inserted"><div _ngcontent-ng-c617240007="" class="projected-actions-wrapper"><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" mattooltip="Download" mattooltipposition="above" iconname="download" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" jslog="273046;track:generic_click,impression" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-69" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">download</span></button><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" iconname="content_copy" mattooltip="Copy to clipboard" mattooltipposition="above" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" jslog="273045;track:generic_click,impression" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-70" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">content_copy</span></button></div><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" mattooltipposition="above" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-71" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">expand_less</span></button></div></span><span class="mat-expansion-indicator ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" aria-hidden="true" focusable="false"><path d="M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"></path></svg></span></mat-expansion-panel-header><div class="mat-expansion-panel-content-wrapper"><div role="region" class="mat-expansion-panel-content" id="cdk-accordion-child-7" aria-labelledby="mat-expansion-panel-header-7"><div class="mat-expansion-panel-body"><pre _ngcontent-ng-c617240007="" class="ng-star-inserted">    <code _ngcontent-ng-c617240007=""><span class="hljs-comment">// 假设 parsedData 是你 response.text() 并且 JSON.parse 后的数组</span>
<span class="hljs-keyword">const</span> text = parsedData[<span class="hljs-number">1</span>]?.[<span class="hljs-number">0</span>]?.[<span class="hljs-number">2</span>]; <span class="hljs-comment">// 手动提取</span></code>
  </pre></div></div></div></mat-expansion-panel></div></ms-code-block><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">缺点</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：Google 只要改一下 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">.proto</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 定义（比如加了一个字段），数组下标就会变（比如变成 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">[3]</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">），你的代码瞬间失效。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ul><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">方案 B：使用 Google 官方生成的 JS 代码（逆向）</span></ms-cmark-node></strong><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">如果你能找到加载这个页面的原始 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">main.js</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">，里面其实包含了由 Google 编译器（Closure Compiler）生成的解析代码。</span><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">但是，这些代码通常是混淆过的（比如 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">a.b.c(d)</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">），逆向还原出 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">.proto</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 结构的工作量极其巨大，通常不值得。</span></ms-cmark-node></p><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">方案 C：使用通用 Protobuf 调试工具（辅助猜测）</span></ms-cmark-node></strong><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">有一些工具（如 Charles Proxy 的 Protobuf 插件，或者特定的 Python 库如 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">blackboxprotobuf</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">）可以尝试推断结构，但对于这种 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">JSON 数组</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 格式，它们通常无能为力，因为这本质上已经是 JSON 了，只是语义丢失了。</span></ms-cmark-node></p><h3 _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">三、 强烈建议：不要用这个接口</span></ms-cmark-node></h3><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">你抓包得到的 URL </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">alkalimakersuite-pa.clients6.google.com</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 是 Google 的 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">私有内部 API</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">（Internal API）。</span></ms-cmark-node></p><ol _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">没有 SLA 保障</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：Google 随时会改格式、改参数、封禁非浏览器来源的请求。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">鉴权复杂</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：那个 </span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">SAPISIDHASH</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> 是基于你的 Cookie 动态计算的，非常难模拟。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">格式恶心</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：就是你看到的这种手动解析的数组。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ol><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">推荐做法：</span></ms-cmark-node></strong><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">如果你想开发 Chrome 插件或应用，请使用 </span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">Gemini 官方公开 API</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted"> (</span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">generativelanguage.googleapis.com</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">)。</span></ms-cmark-node></p><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">文档</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span><a _ngcontent-ng-c4139270029="" target="_blank" href="https://www.google.com/url?sa=E&amp;q=https%3A%2F%2Fai.google.dev%2F" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">ai.google.dev</span></ms-cmark-node></a></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">优点</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">：</span></ms-cmark-node></p><ul _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">返回的是标准的、带 Key 的 JSON。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">有官方的 SDK (</span><span _ngcontent-ng-c4139270029="" class="inline-code ng-star-inserted">@google/generative-ai</span><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">)。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">可以使用 API Key，不需要搞复杂的 Cookie 逆向。</span></ms-cmark-node></p></ms-cmark-node></li><li _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">支持标准的流式输出（Stream）。</span></ms-cmark-node></p></ms-cmark-node></li></ms-cmark-node></ul></ms-cmark-node></li></ms-cmark-node></ul><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">对比一下官方 API 的响应：</span></ms-cmark-node></strong></ms-cmark-node></p><ms-code-block _ngcontent-ng-c4139270029="" _nghost-ng-c617240007="" class="ng-star-inserted"><div _ngcontent-ng-c617240007="" class="container"><mat-expansion-panel _ngcontent-ng-c617240007="" class="mat-expansion-panel sticky-header mat-expanded mat-expansion-panel-animations-enabled"><mat-expansion-panel-header _ngcontent-ng-c617240007="" role="button" class="mat-expansion-panel-header mat-focus-indicator sticky mat-expanded" id="mat-expansion-panel-header-8" tabindex="0" aria-controls="cdk-accordion-child-8" aria-expanded="true" aria-disabled="false"><span class="mat-content"><mat-panel-title _ngcontent-ng-c617240007="" class="mat-expansion-panel-header-title"><span _ngcontent-ng-c617240007="" aria-hidden="true" class="material-symbols-outlined notranslate title-icon ng-star-inserted"> code </span><span _ngcontent-ng-c617240007="" class="ng-star-inserted">JSON</span></mat-panel-title><div _ngcontent-ng-c617240007="" class="actions-container ng-star-inserted"><div _ngcontent-ng-c617240007="" class="projected-actions-wrapper"><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" mattooltip="Download" mattooltipposition="above" iconname="download" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" jslog="273046;track:generic_click,impression" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-69" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">download</span></button><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" iconname="content_copy" mattooltip="Copy to clipboard" mattooltipposition="above" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" jslog="273045;track:generic_click,impression" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-70" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">content_copy</span></button></div><button _ngcontent-ng-c617240007="" ms-button="" variant="icon-borderless" mattooltipposition="above" class="mat-mdc-tooltip-trigger ms-button-borderless ms-button-icon ng-star-inserted" aria-disabled="false" aria-describedby="cdk-describedby-message-ng-1-71" cdk-describedby-host="ng-1"><span _ngcontent-ng-c617240007="" class="material-symbols-outlined notranslate ms-button-icon-symbol ng-star-inserted" aria-hidden="true">expand_less</span></button></div></span><span class="mat-expansion-indicator ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" aria-hidden="true" focusable="false"><path d="M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"></path></svg></span></mat-expansion-panel-header><div class="mat-expansion-panel-content-wrapper"><div role="region" class="mat-expansion-panel-content" id="cdk-accordion-child-8" aria-labelledby="mat-expansion-panel-header-8"><div class="mat-expansion-panel-body"><pre _ngcontent-ng-c617240007="" class="ng-star-inserted">    <code _ngcontent-ng-c617240007=""><span class="hljs-comment">// 官方 API 返回的，清晰明了</span>
{
  <span class="hljs-string">"candidates"</span>: [
    {
      <span class="hljs-string">"content"</span>: {
        <span class="hljs-string">"parts"</span>: [
          { <span class="hljs-string">"text"</span>: <span class="hljs-string">"Manifest V3 是..."</span> }
        ]
      }
    }
  ]
}</code>
  </pre></div></div></div></mat-expansion-panel></div></ms-code-block><p _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">总结：</span></ms-cmark-node></strong><br _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029="" class="ng-star-inserted"></ms-cmark-node><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">那个数组格式没有通用的库能“自动”变成带 Key 的对象，因为缺少 Schema。在插件开发中，如果非要拦截这个私有接口，只能靠</span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">人肉找规律</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">并</span><strong _ngcontent-ng-c4139270029="" class="ng-star-inserted"><ms-cmark-node _ngcontent-ng-c4139270029="" _nghost-ng-c4139270029=""><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">硬编码数组下标</span></ms-cmark-node></strong><span _ngcontent-ng-c4139270029="" class="ng-star-inserted">，且要做好随时挂掉的心理准备。</span></ms-cmark-node></p></ms-cmark-node></ms-text-chunk></ms-prompt-chunk><div _ngcontent-ng-c2470520458="" class="turn-information ng-star-inserted"></div></div></div></div>